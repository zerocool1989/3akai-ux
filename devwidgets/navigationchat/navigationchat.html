<link rel="stylesheet" type="text/css" href="/devwidgets/navigationchat/css/navigationchat.css"/>

<!-- EXPLORE NAV CONTAINER -->
<div id="explore_nav_container" style="display:none">
    <div class="fl-container explore_nav">
        <ul class="explore">
            <li id="nav_my_sakai_link"><a  href="/dev/my_sakai.html">__MSG__MY_SAKAI__</a></li>
            <li id="nav_content_media_link"><a href="/dev/content_media_wow.html">__MSG__CONTENT_AND_MEDIA__</a></li>
            <li id="nav_people_link"><a href="/dev/peoplewow.html">__MSG__PEOPLE__</a></li>
            <li id="nav_courses_sites_link"><a href="/dev/my_sites.html">__MSG__COURSES_AND_SITES__</a></li>
            <li id="nav_events_link"><a href="/dev/events.html">Events</a></li>
        </ul>

        <!-- PERSONAL CONTAINER -->
        <div class="personal-container fl-force-right">

            <div class="personal">

                <ul>
                    <li id="other_logins_button_container" style="display: none;"><a class="other_logins" href="javascript:;">__MSG__INSTITUTIONAL_LOGIN__</a></li>
                    <li id="register_button_container" style="display: none;"><a class="register" href="/dev/create_new_account.html">__MSG__REGISTER__</a></li>
                    <li id="login_button_container" style="display: none;"><a class="log_in" href="javascript:;">__MSG__LOGIN__</a></li>

                    <!-- CHAT STATUS DROPDOWN -->
                    <li id="user_link_container">
                        <a id="user_link" class="user_link" href="javascript:;">
                            <span id="userid"></span>
                        </a>
                    </li>

                    <li><a class="mail" href="/dev/inbox.html"><img src="/dev/_images/mail_icon.png" alt="Mail Icon" /> (<span id="chat_unreadMessages">0</span>)</a></li>
                    <li><a class="help" href="http://confluence.sakaiproject.org/display/SAKDEV/Sakai+3" target="_blank">__MSG__HELP__</a></li>
                    <li><a class="sign_out" href="/dev/logout.html">__MSG__SIGN_OUT__</a></li>
                </ul>

                <div id="login_container" style="display: none;">
                    <form id="login_form" method="POST">
                        <label for="login_username">__MSG__USERNAME__</label>
                        <br/>
                        <input type="text" alt="__MSG__USERNAME__" id="login_username" name="login_username" />
                        <br />
                        <label for="login_password">__MSG__PASSWORD__</label>
                        <br />
                        <input type="password" alt="__MSG__PASSWORD__" id="login_password" name="login_password" />

                        <div id="login_error_message" style="display: none;">__MSG__LOGIN_FAILED__!</div>
                        <div id="login_busy" class="fl-force-right" style="display:none;"></div>

                        <div class="login-container-button fl-force-right">
                            <button id="login_cancel_button" type="button" class="s3d-button s3d-button"><span class="s3d-button-inner">__MSG__CANCEL__</span></button>
                            <button id="login_submit_button" type="button" class="s3d-button s3d-button-primary"><span class="s3d-button-inner">__MSG__SIGN_IN__</span></button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- USER LINK MENU -->
<div id="user_link_menu" style="display:none">
    <div class="user_link_menu_border">
        <ul>
            <li class="insert_more_menu_inactive">__MSG__CHAT_STATUS__</li>
            <li><a id="user_link_chat_status_online" class="user_link_chat_status" href="javascript:;">__MSG__AVAILABLE__</a></li>
            <li><a id="user_link_chat_status_busy" class="user_link_chat_status" href="javascript:;">__MSG__BUSY__</a></li>
            <li><a id="user_link_chat_status_offline" class="user_link_chat_status" href="javascript:;">__MSG__OFFLINE__</a></li>
        </ul>
    </div>
    <div>
        <ul>
            <li><a href="/dev/inbox.html">__MSG__MY_INBOX__</a></li>
            <li><a href="/dev/people.html">__MSG__MY_CONTACTS__</a></li>
            <li><a href="/dev/profile.html">__MSG__MY_PROFILE__</a></li>
            <li><a href="/dev/account_preferences.html">__MSG__MY_ACCOUNT__</a></li>
        </ul>
    </div>
</div>

<!-- SEARCH -->
<div id="genaral_search_container">
    <form class="fl-force-right" method="post" action="">
        <input type="text" id="general_search_input" class="general_search_input" value="__MSG__SEARCH_FOR__"/>
        <button id="general_search_submit_button" class="s3d-search-button s3d-button s3d-button-primary" type="submit"><span class="s3d-button-inner"><span class="s3d-button-icon-right">__MSG__SEARCH__</span></span></button>
        <br class="clear"/>
    </form>
</div>

<div id="chat_available_template" style="display:none"><!--
    <a href="javascript:;" id="chat_available_minimize">
        <img class="chat_button_image" src="/devwidgets/navigationchat/images/chat_minimize.png" alt="" />
    </a>
    <table>
        <tbody>
            <tr id="chat_available_me" class="chat_top_container">
                {if me}
                <td class="chat_available_image">
                    {if me.photo}
                        <img src="${me.photo}"/>
                    {else}
                        <img src="/dev/_images/person_icon.jpg" />
                    {/if}
                </td>
                <td>
                    <span class="chat_available_name chat_available_status_${me.chatstatus}">${me.name}</span><br />
                    <span class="chat_available_statusmessage">${me.statusmessage}</span>
                </td>
                {/if}
            </tr>
        </tbody>
    </table>
    <div id="chat_available_others" {if totalitems > 4} class="chat_available_others_overflow" {else} class="chat_available_others_nooverflow" {/if}>
        <table>
            <tbody>
                {for i in items}
                    {if i['sakai:status'] == "online" && i.chatstatus != "offline"}
                        <tr class="chat_available_friend">
                            <td class="chat_available_image">
                                {if i.photo}
                                    <img src="${i.photo}" />
                                {else}
                                    <img src="/dev/_images/person_icon.jpg" />
                                {/if}
                            </td>
                            <td>
                                <span class="chat_available_status_${i.chatstatus} initiate_chat_window" id="initiate_chat_window_${i.user}">${i.name}</span><br />
                                <span class="chat_available_statusmessage">${i.statusmessage}</span>
                            </td>
                        </tr>
                    {/if}
                {forelse}
                <tr>
                    <td id="chat_no_online_connections">
                        __MSG__NO_ONLINE_CONNECTIONS_FOUND__
                    </td>
                </tr>
                {/for}
            </tbody>
        </table>
    </div>
--></div>

<!-- CHAT WINDOW -->
<div style="display:none" id="chat_windows_template"><!--
    {var index = 0}
    {for i in items}
        {if special != false}
            {if special == 0}
            <span class="user_chat_first">
            {else}
            <span>
            {/if}
            <span id="online_button_${i.userid}" class="user_chat">

        {else}
            {if index == 0}
            <span class="user_chat_first">
            {else}
            <span>
            {/if}
            <span id="online_button_${i.userid}" class="user_chat">
        {/if}
        <a id="chat_window_chatstatus_${i.userid}" class="chat_name_link chat_available_status_${i.chatstatus}">${i.name}</a>
        </span>
        </span>

        ${index++|eat}
    {/for}
--></div>

<!-- CHAT WINDOW -->
<div style="display:none" id="chat_windows_windows_template"><!--
    {var index = 0}
    {for i in items}

        {if special != false}
            <div id="chat_with_${i.userid}" class="chat_with_user" style="left: ${(special*150)}px; display:none">
        {else}
            <div id="chat_with_${i.userid}" class="chat_with_user" style="left: ${(index*150)}px; display:none">
        {/if}

                <table class="chat_top_table">
                    <tr class="chat_top_container">
                        <td class="chat_available_image">
                            {if i.photo}
                                <img src="${i.photo}" id="chat_window_photo_${i.userid}" />
                            {else}
                                <img src="_images/person_icon.png" id="chat_window_photo_${i.userid}" />
                            {/if}
                        </td>
                        <td>
                            <a href="javascript:;">
                                <img id="chat_close_${i.userid}" class="chat_user_button_image chat_close" src="/devwidgets/navigationchat/images/chat_close.png" alt="" />
                            </a>
                            <a href="javascript:;">
                                <img id="chat_minimize_${i.userid}" class="chat_user_button_image chat_minimize" src="/devwidgets/navigationchat/images/chat_minimize.png" alt="" />
                            </a>
                            <span id="chat_window_name_${i.userid}" class="chat_window_name">${i.name}</span><br />
                            <span id="chat_window_statusmessage_${i.userid}" class="chat_available_statusmessage">${i.statusmessage}</span>
                        </td>
                    </tr>
                </table>
                <div id="chat_with_${i.userid}_content" class="chat_with_content_nooverflow"></div>
                <input id="chat_with_${i.userid}_txt" class="chat_with_txt" type="text"/>
            </div>

        ${index++|eat}
    {/for}
--></div>

<!-- CHAT MESSAGE -->
<div style="display:none" id="chat_content_template"><!--
    <div class="chat_content_container">
        <span class="chat_content_name">${name}</span><span class="chat_content_time">${time}</span><br />
        <span class="chat_content_message">${message}</span>
    </div>
--></div>

<!-- CHAT BOTTOM CONTAINER -->
<div class="chat_main_container doFixed" id="chat_main_container" style="display:none; left:0px;">
    <div id="chat_container" style="height:30px">
        <table class="chat_main_table" summary="Chat">
            <tr>
                <td id="chat_windows"></td>
                <td id="chat_online_connections_link">
                    <span id="online_button">
                        <img src="/devwidgets/navigationchat/images/people.png" width="16px" class="chat_people_icon" alt="Online"/>
                        <a class="chat_straight_link" id="chat_online"></a>

                        <!-- SHOW ONLINE FRIENDS -->
                        <div id="show_online" style="display:none">
                            <div id="chat_available"></div>
                        </div>

                    </span>
                </td>
            </tr>
        </table>
        <div id="chat_windows_container" style="position:relative"></div>
    </div>
</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" language="JavaScript" src="/devwidgets/navigationchat/javascript/navigationchat.js"></script>
